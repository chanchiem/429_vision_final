<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" >
    <head>
        <title>PiCam</title>
        <style type="text/css">
            .style1
            {
                width: 50%;
            }
        </style>
		<script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
        <script language="javascript" type="text/javascript">

            function Button_onclick(direction) {
                $.ajax({ url: '/' + direction });
            }

            function send_command(cmd) {
                $.ajax({ 
                    url: '/cmd/' + cmd,
                    type: 'GET',
                    success: handle_image
            })
            }

            function handle_image(data) {
                var json_data = JSON.parse(data);

                var img = json_data['encoded_picture'];
                var timestamp = json_data['timestamp'];

                // console.log(img);
                $('#image_placeholder').attr("src", "data:image/jpg;base64," + img);
            }

        </script>
    </head>
    <body> 

        <table align="center" class="style1">
            <tr>
                <td colspan="2" style="text-align: center">
					<img id="image_placeholder" src="data:image/png;base64,"/>
                </td>
            </tr>
            <tr>
                <td colspan="2" style="text-align: center">
                    <input id="btnUp" type="button" value="Take Picture" onclick="send_command('req_picture')" />
                </td>
            </tr>
        </table>
    </body>
</html>
